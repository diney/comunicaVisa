<body>

	<div class="container-fluid">

		<!-- Loading overlay section starts -->
		<div [class.overlay-display]="overlayDisplay" class="overlay">
			<h1>Loading</h1>
		</div>
		<!-- Loading overlay section starts -->



		<!-- header section starts -->
		<div class="col-md-12">
			<div class="header">
				<div class="welcome-user">
					<span>{{username}}</span>
					<div class="back1" *ngIf="userfoto!=true">
						<img type="button" data-toggle="modal" data-target="#myModal" src="{{userfoto}}">
					</div>
					<div class="back1" *ngIf="userfoto==true">
						<img type="button" data-toggle="modal" data-target="#myModal" src="assets/images/logos/jogador.png">
					</div>
				</div>
				<hr style="height:4px; border:none; background-color:#DB362C; margin-top: 0px; margin-bottom: 0px;" />
				<hr style="height:4px; border:none; background-color:darkgreen; margin-top: 0px; margin-bottom: 0px;" />
			</div>
		</div>
		<!-- header section ends -->

		<div class="row chat-body">

			<!-- Messages section starts -->
			<div class="col-md-9">
				<div class="massege-wrapper">

					<div class="massege-container">

						<div *ngIf="selectedUserName" class="opposite-user">
							<ol class="chat">
								<div *ngIf="selectedUserFoto">
									<div class="back"> <img src="data:image/jpg;base64,{{selectedUserFoto}}" draggable="false" /> </div>
								</div>
								<p>{{selectedUserName}}</p>
							</ol>
						</div>

						<ul class="message-thread">

							<li *ngFor="let message of messages" [class.align-right]="alignMessage(message.toUserId)">

								{{ message.message}}
								<p>

									<time> {{ message.hora | date:'shortTime' }}
										<div *ngIf=" message.read && alignMessage(message.toUserId) ">
											<img src="assets/images/logos/bullet_blue.png" />
										</div>
									</time>
									<p>

							</li>
						</ul>

					</div>
					<div class="message-typer">
						<textarea class="message form-control" placeholder="Digite e tecle Enter" [(ngModel)]="message" (keyup)="sendMessage($event)"
						 required></textarea>
					</div>
				</div>
			</div>
			<!-- Messages section ends -->

			<!-- User chat list section starts -->
			<div class="col-md-3">
				<div class="user-list-wrapper">
					<ul class="user-list">

						<!-- click event to handle the selection : selectedUser() -->
						<!-- adding a class to indicate the selection     [class.selected-user]="isUserSelected(user._id)" -->
						<li *ngFor="let user of chatListUsers" (click)="selectedUser(user)" [class.selected-user]="isUserSelected(user._id)">

							<div class="user-online" *ngIf="user.online == 'Y'">
								{{ user.nome}} {{user.msg}}
							</div>
							<div class="user-offline" *ngIf="user.online == 'N'" >
								{{ user.nome}} {{user.msg}}
							</div>

						</li>
					</ul>
				</div>
			</div>
			<!-- User chat list section ends -->

		</div>
		<!-- Modal -->
		<div class="modal fade" id="myModal" role="dialog">
			<div class="modal-dialog">

				<!-- Modal content-->
				<div class="modal-content">
					<div class="modal-header">
						<!--button type="button" class="close" data-dismiss="modal">&times;</button-->
						<h4 class="modal-title">ADICIONAR FOTO</h4>
					</div>
					<div class="modal-body">
						<form>

							<div class="panel panel-default">

								<div class="panel-body">
									<div class="form-group">

										<input type="file" name="arquivo" id="arquivo" class=" form-control " (change)="verificaExt($event)" placeholder="Upload file..."
										 [(ngModel)]="arquivo" required #file="ngModel" />
										<div class="alert alert-danger" role="alert" [hidden]="tipoArqui">O arquivo selecionado não e válido</div>

									</div>

								</div>
							</div>

						</form>

					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" (click)="limpaUpload()" data-dismiss="modal">Close</button>
						<button type="submit" data-dismiss="modal" [disabled]="hideElement || !tipoArqui" class="btn btn-success" (click)="upload()">Salvar</button>
					</div>
				</div>

			</div>
		</div>

	</div>
</body>